/* chronicles_of_angular v0.4.0-beta
 * Copyright (c) 2015 Tommi Ronkainen
 */
function d(a,b,c){var e=Array.prototype.slice.call(arguments);if(0!==e.length){for(var f="",g=0;g<e.length;g++)g&&(f+=" "),f+=e[g];return d.messages.push(f),d.silenced||console.log.apply(console,e),e[e.length-1]}}d.silenced=!1,d.messages=[],d.quiet=function(){d.messages=[],d.silenced=!0},d.errors=function(){var a=d.messages;return d.messages=[],d.silenced=!1,a},Object.defineProperty(String.prototype,"ucfirst",{value:function(a){var b=this.toString();return b.length&&(b=b[0].toUpperCase()+b.substr(1)),b}}),Object.defineProperty(String.prototype,"code2human",{value:function(a){var b=this.split("_");return b.map(function(a){return a.ucfirst()}).join(" ")}}),angular.module("coa.audio",[]),angular.module("coa.auth",["coa.data"]),angular.module("coa.core",[]),angular.module("coa.data",["coa.core"]),angular.module("coa.input",[]),function(){function a(a){angular.forEach(a,function(a,b){e[b]=new Audio(a)})}function b(a,b){return"list"===a?Object.keys(e):a in e?void("undefined"!=typeof DEBUG&&DEBUG?d((b?b:"")+"   >>> "+a+" <<<"):e[a].play()):void d("Invalid audio name:",a)}var c=angular.module("coa.audio"),e={};c.service("player",[function(){return{load:a,play:b}}])}(),function(){var a=angular.module("coa.auth");a.factory("User",["Data","TypeStr",function(a,b){function c(a){this.init(a)}return c.prototype=new a("User","coa.auth",[{name:{type:b}}]),c}])}(),function(){var a=angular.module("coa.core");a.factory("Class",[function(){function a(){}return a.prototype={},a}])}(),function(){var a=angular.module("coa.data");a.factory("Data",["Class",function(a){function b(a,b,c){this._class=a,this._module=b,this._members=[],this._types={},arguments.length&&this._createMembers(c)}return b.prototype=new a,b.prototype.toJSON=function(){ret={};for(var a=0;a<this._members.length;a++)ret[this._members[a].name]=this._members[a].toJSON(this[this._members[a].name]);return ret},b.prototype.toString=function(){return this._module+"."+this._class+JSON.stringify(this.toJSON())},b.prototype._createMembers=function(a){if(!(a instanceof Array))return void d("Invalid arguments",a,"for Data");for(var b=0;b<a.length;b++)for(var c=Object.keys(a[b]),e=0;e<c.length;e++)this._addMember(c[e],a[b][c[e]])},b.prototype._addMember=function(a,b){if("string"!=typeof a)return void d("Invalid name for a data member",a,"with definition",b);if("function"!=typeof b.type)return void d("Invalid type for",a,"given in definition",b);var c=new b.type,e=b.options||{};return c.validateOptions(e)?(c.init(a,b["default"],b.label,e),this._types[a]?void d("Trying to define member",a,"as",c,"but it has been already defined as",this._types[a],"in",this):(this._members.push(c),void(this._types[a]=c))):void d("Invalid options",e,"for type",c)},b.prototype.reset=function(){for(var a=0;a<this._members.length;a++)this[this._members[a].name]=this._members[a].copy(this._members[a]["default"])},b.prototype.init=function(a){if(this.reset(),void 0!==a)if(null===a&&(a={}),a instanceof Object)for(var b in a){var c=this._types[b];c?c.set(this,b,a[b]):d("Invalid member name",name,"in initial data",a,"for",this)}else d("Invalid initial values",a,"for",this)},b.prototype.getMembers=function(){return this._members},b.prototype.getTypes=function(){return this._types},b.prototype.getType=function(a){var b=this._types[a];return b?b:null},b}])}(),function(){var a=angular.module("coa.data");a.factory("Type",["Class",function(a){function b(){this.name=null,this.label=null,this["default"]=null,this.options=null}return b.prototype=new a,b.prototype.init=function(a,b,c,d){this.name=a,this.label=c||a.code2human(),this.options=d||{},this["default"]=this.convert(void 0!==b?b:null)},b.prototype.validateOptions=function(a){return 0===Object.keys(a).length},b.prototype.convert=function(a){return a},b.prototype.toJSON=function(a){return a},b.prototype.copy=function(a){return a},b.prototype.set=function(a,b,c){var e=this.convert(c);return void 0===e&&(d("Invalid value",c,"for member of type",this,"for object",a),e=this["default"]),a[b]=e,e},b}]),a.factory("TypeStr",["Type",function(a){function b(a){}return b.prototype=new a,b.prototype.convert=function(a){return void 0!==a?null===a?null:a+"":void 0},b}]),a.factory("TypeInt",["Type",function(a){function b(a){}return b.prototype=new a,b.prototype.convert=function(a){return void 0!==a?null===a?null:parseInt(a+""):void 0},b}]),a.factory("TypeObj",["Type","Data","factory",function(a,b,c){function d(a){}return d.prototype=new a,d.prototype.validateOptions=function(a){return 1!==Object.keys(a).length?!1:!!a["class"]},d.prototype.convert=function(a){return void 0!==a?c.create(this.options["class"],a):void 0},d.prototype.copy=function(a){return c.create(this.options["class"],a.toJSON())},d}])}(),function(){var a=angular.module("coa.data");a.service("factory",[function(){function a(a,b){if(c[a]&&c[a][b])return c[a][b];var e=angular.injector([a]);return e.has(b)?(c[a]||(c[a]={}),c[a][b]=e.get(b),c[a][b]):(d("There is no such class than",b,"defined in the module",a),null)}function b(b,c,d){if(2===arguments.length){var e=b.split(".");d=c,c=e.pop(),b=e.join(".")}var f=a(b,c);return f?new f(d):null}var c={};return{constructor:a,create:b}}])}(),function(){var a=angular.module("coa.input");a.directive("keyHandler",[function(){var a={32:"Space"};return{restrict:"A",link:function(b,c,e){c.bind("keypress",function(c){var f="Unknown key "+c.keyCode;c.charCode>=65&&c.charCode<=90?f=String.fromCharCode(c.charCode):c.charCode>=97&&c.charCode<=122?f=String.fromCharCode(c.charCode).toUpperCase():c.charCode>=33&&c.charCode<=47?f=String.fromCharCode(c.charCode):c.charCode>=48&&c.charCode<=57?f=String.fromCharCode(c.charCode):c.charCode in a&&(f=a[c.charCode]);var g=b.$eval(e.keyHandler);g?b.$apply(function(){g(f)}):d("Cannot find key-press handler",e.coaKeyHandler)})}}}])}();