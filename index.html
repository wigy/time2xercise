<html ng-app="TimerApp">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/timer.css">
    <script src="lib/jquery-2.1.4.min.js"></script>
    <script src="lib/angular-1.3.15.min.js"></script>
    <script src="lib/angular.audio.js"></script>
    <script src="src/settings.js"></script>
    <script src="data/data.js"></script>
    <script src="data/test.js"></script>
    <script src="data/generic.js"></script>
    <script src="data/fitness.js"></script>
    <script src="data/rugby.js"></script>
    <script src="src/models.js"></script>
    <script src="src/timer.js"></script>
    <title>Time2Xercise</title>
  <head>

  <body ng-controller="TimerController">

    <div class="menu" ng-class="{fixed: show_menu}">
        <button ng-click="goPage('admin')">Admin</button>
        <button ng-click="goPage('clock')">Clock</button>
        <button ng-click="goPage('changelog')">Changelog</button>
        <button ng-click="goPage('soundtest')">Sound Test</button>
        &nbsp;
        <button class="small" ng-click="jumpToPrevious()">&lt;&lt;</button>
        <button class="small" ng-click="togglePause()">{{timing.pause ? '>' : '||'}}</button>
        <button class="small" ng-click="jumpToNext()">&gt;&gt;</button>
    </div>

    <div ng-if="page=='admin'">

            <h2>Settings</h2>

            <label>Starting Time</label>
            <input ng-model="timing.starting_time" ng-pattern="/\d\d:\d\d:\d\d/" ng-change="timing.recalc()"></input>
            {{timing.getClock()}}
            <label>Training</label>
            <select ng-model="timing.training_name"
                    ng-change="selectTraining(timing.training_name)"
                    ng-options="training as training for (training, _) in timing.trainings"></select>
            <label>Schedule</label>
            <select ng-model="timing.schedule_name"
                    ng-change="selectSchedule(timing.schedule_name)"
                    ng-options="schedule as schedule for (schedule, _) in timing.training.schedules"></select>
            <label>Program</label>
            <select ng-model="timing.program_name"
                    ng-change="selectProgram(timing.program_name)"
                    ng-options="program as program for (program, _) in timing.training.schedule.programs"></select>

            <h3>Controls</h3>
            <button ng-click="startNow(1)" ng-disabled="!timing.training.schedule.program.name">Start Now</button>
            <button ng-click="startNow(10)" ng-disabled="!timing.training.schedule.program.name">Start In 10s</button>
            <button ng-click="testIt()" ng-if="DEBUG">Test</button>

            <h3>Schedule</h3>
            <timer-schedule timing="timing" />
    </div>

    <div ng-if="page=='clock'">
        <div class="title" ng-bind="timing.getCurrentTitle()"></div>
        <div class="remaining" ng-class="{almost_finished: timing.getRemainingSeconds() < 60}" ng-click="toggleMenu()" ng-bind="timing.getRemaining()"></div>
        <div class="bottom previous" ng-bind="timing.getPrevious()"></div>
        <div class="bottom clock" ng-bind="timing.getClock()"></div>
        <div class="bottom next" ng-bind="timing.getNext()"></div>
        <div class="description" ng-bind-html="timing.training.schedule.program.timetable.current.description"></div>
    </div>

    <div ng-if="page=='soundtest'">
        <h1>Time2Xercise v{{VERSION}}</h1>
            <h2>Sound Test</h2>
            <div ng-repeat="sound in PlaySound('list')">
                <button ng-click="PlaySound(sound)">{{sound}}</button>
            </div>
    </div>

    <div ng-if="page=='changelog'">
        <h1>Time2Xercise v{{VERSION}}</h1>
          <h2>Changelog</h2>
            <div class="row">
                <div ng-repeat="entry in CHANGELOG track by $index">
                    <h3>{{entry.version}}</h3>
                    <ul><li ng-repeat="text in entry.changes track by $index">{{text}}</ul>
                </div>
            <div>
    </div>

  </body>
</html>
