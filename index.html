<html ng-app="TimerApp">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/timer.css">
    <script src="lib/jquery-2.1.4.min.js"></script>
    <script src="lib/angular-1.3.15.min.js"></script>
    <script src="lib/angular.audio.js"></script>
    <script src="src/settings.js"></script>
    <script src="src/utils.js"></script>
    <script src="data/data.js"></script>
    <script src="data/test.js"></script>
    <script src="data/generic.js"></script>
    <script src="data/fitness.js"></script>
    <script src="data/rugby.js"></script>
    <script src="src/models.js"></script>
    <script src="src/timer.js"></script>
    <title>Time2Xercise</title>
  <head>

  <body ng-controller="TimerController">

    <div class="container menucontainer" ng-class="{fixedmenu: show_menu}">
      <div class="btn-group" role="group" aria-label="...">
        <button class="btn btn-default" ng-click="goPage('admin')"><span class="glyphicon glyphicon-cog"></span> Admin</button>
        <button class="btn btn-default" ng-click="goPage('clock')"><span class="glyphicon glyphicon-time"></span> Clock</button>
        <button class="btn btn-default" ng-click="goPage('changelog')"><span class="glyphicon glyphicon-list"></span> Changelog</button>
        <button class="btn btn-info" ng-click="goPage('soundtest')"><span class="glyphicon glyphicon-sound-dolby"></span> Sound Test</button>
      </div>
      <div class="btn-group" role="group" aria-label="...">
        <button class="btn btn-default" ng-click="jumpToPrevious()"><span class="glyphicon glyphicon-backward"></span></button>
        <button class="btn btn-default" ng-click="togglePause()"><span ng-if="!timing.pause" class="glyphicon glyphicon-pause"></span><span ng-if="timing.pause" class="glyphicon glyphicon-play"></span></button>
        <button class="btn btn-default" ng-click="jumpToNext()"><span class="glyphicon glyphicon-forward"></span></button>
      </div>
    </div>

    <div ng-if="page=='admin'" class="container">

            {{timing.getClock()}}

            <div class="row">
            <form class="form-inline">
                <div class="form-group">
                    <label for="starting-time">Starting Time</label>
                    <input id="starting-time" class="form-control" ng-model="timing.starting_time"
                            ng-pattern="/\d\d:\d\d:\d\d/" ng-change="timing.recalc()"></input>
                </div>
                <div class="form-group">
                    <label for="training">Training</label>
                    <select id="training" class="form-control" ng-model="timing.training_name"
                            ng-change="selectTraining(timing.training_name)"
                            ng-options="training as training for (training, _) in timing.trainings"></select>
                </div>
                <div class="form-group">
                    <label for="schedule">Schedule</label>
                    <select id="schedule"  class="form-control" ng-model="timing.schedule_name"
                            ng-change="selectSchedule(timing.schedule_name)"
                            ng-options="schedule as schedule for (schedule, _) in timing.training.schedules"></select>
                </div>
                <div class="form-group">
                    <label for="program">Program</label>
                    <select id="program" class="form-control" ng-model="timing.program_name"
                            ng-change="selectProgram(timing.program_name)"
                            ng-options="program as program for (program, _) in timing.training.schedule.programs"></select>
                </div>
            </form>
            </div>

            <div class="row">
            <div class="btn-group" role="group" aria-label="...">
            <button class="btn btn-default" ng-click="startNow(1)" ng-disabled="!timing.training.schedule.program.name">Start Now</button>
            <button class="btn btn-default" ng-click="startNow(10)" ng-disabled="!timing.training.schedule.program.name">Start In 10s</button>
            <button class="btn btn-info" ng-click="testIt()" ng-if="DEBUG">Test</button>
            </div>
            </div>

            <div class="row">
            <timer-schedule timing="timing" />
            </div>
    </div>

    <div ng-if="page=='clock'" class="container">
        <div class="title" ng-bind="timing.getCurrentTitle()"></div>
        <div class="remaining" ng-class="{almost_finished: timing.getRemainingSeconds() < 60}" ng-click="toggleMenu()" ng-bind="timing.getRemaining()"></div>
        <div class="bottom previous" ng-bind="timing.getPrevious()"></div>
        <div class="bottom clock" ng-bind="timing.getClock()"></div>
        <div class="bottom next" ng-bind="timing.getNext()"></div>
        <div class="description" ng-bind-html="timing.training.schedule.program.timetable.current.description"></div>
    </div>

    <div ng-if="page=='soundtest'" class="container">
        <h1>Time2Xercise v{{VERSION}}</h1>
            <h2>Sound Test</h2>
            <div ng-repeat="sound in PlaySound('list')">
                <a ng-click="PlaySound(sound)">{{sound}}</a>
            </div>
    </div>

    <div ng-if="page=='changelog'" class="container">
        <h1>Time2Xercise v{{VERSION}}</h1>
          <h2>Changelog</h2>
            <div class="row">
                <div ng-repeat="entry in CHANGELOG track by $index">
                    <h3>{{entry.version}}</h3>
                    <ul><li ng-repeat="text in entry.changes track by $index">{{text}}</ul>
                </div>
            <div>
    </div>

  </body>
</html>
